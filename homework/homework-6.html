
<!-- saved from url=(0044)http://avandamiri.com/fewd-30/for-loops.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><ul>
  <!-- Movies will go here, see below. -->
</ul>

<script>
var favoriteMovies = [
  {
    name: 'Cool Runnings',
    year: 1993,
    url: 'http://www.imdb.com/title/tt0106611/',
    ratings: [5, 5, 5, 5, 5, 5, 5, 5]
  },
  {
    name: 'Terminator 2',
    year: 1991,
    url: 'http://www.imdb.com/title/tt0103064/',
    ratings: [5, 4, 3, 5, 4, 5, 4, 5, 5, 5, 3]
  },
  {
    name: 'Interstellar',
    year: 2014,
    url: 'http://www.imdb.com/title/tt0816692/',
    ratings: [5, 3, 5, 5, 1, 2, 4, 5, 5, 2]
   }
];

// Create a <li> for each movie that looks like this and add it to the list:
// <li>
//   <a href="http://www.imdb.com/title/tt0106611/">Cool Runnings</a>
//   <span>(1993, 5.0 stars, 8 ratings)</span>
// </li>

function calcMovieRating (movieRatings) {
  var sumRatings = 0;
  var numRatings = movieRatings.length;
  for (RatingIdx=0; RatingIdx < numRatings; RatingIdx=RatingIdx+1) {
    sumRatings = sumRatings + parseInt(movieRatings[RatingIdx]);
  }
  var avgRating = sumRatings / numRatings;
  avgRating = Math.round(avgRating * 10) / 10;
  return avgRating;
}

function createMovie (movie) {
  var movieItem = document.createElement("li");
  var movieLink = document.createElement("a");
  var movieDesc = document.createElement("span");
  movieLink.setAttribute("href",movie.url);
  movieLink.textContent = movie.name;
  var avgRating = calcMovieRating(movie.ratings);
  var numRatings = movie.ratings.length;
  movieDesc.textContent = " (" + movie.year + ", " +  avgRating
    + " stars, " + numRatings + " ratings)";
  movieItem.appendChild(movieLink);
  movieItem.appendChild(movieDesc);
  return movieItem;
}

function addMoviesToList(movieList, movies) {
  for (MovieIdx=0; MovieIdx < movies.length; MovieIdx=MovieIdx+1) {
    var newMovie = createMovie(movies[MovieIdx]);
    movieList.appendChild(newMovie);
  }
}

var movieList = document.querySelector("ul");
addMoviesToList(movieList,favoriteMovies);

</script>
</body></html>
